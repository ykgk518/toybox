# Visitorパターン

## 概要

Visitorパターンはデータ構造と処理を分離する。
データ構造の中をめぐり歩く主体である「訪問者」を表すクラスを用意し、
そのクラスに処理を任せる。

### 背景

データ構造の中に多くの要素が格納されており、その各要素に対して、何らかの処理をしたい。
この時、「処理」のコードはどこに書けばいいだろうか。
データ構造を表しているクラスの中に書く、とすると
**新しい処理が必要になるたびに、データ構造のクラスを修正しなければならない。**
上記の問題を解決するために、Visitorパターンが有用とされています。

## メリット

* 新しい処理を追加したときには新しい「訪問者」を作成すればよいことになる。

## 登場人物

#### Directoryクラス
データの構造の具体的な要素がまとまっています。

### Visitorクラス:

データ構造の要素に対する処理を行います。
今回は追加されたディレクトリ(要素)を一覧表示する処理を行っていますが、
要素に対して条件づけの検索して出力したりすることもできます。

### 特徴

処理を行うクラスを `Visitor` クラスとし、データ構造を保持するクラスを `Element` クラスとすると、
`Visitor` クラスには `visit(element)` メソッドを、
`Element` クラスには `accept(visitor)` メソッドを実装します。
`visit()` と `accept()` の引数にはお互いのインスタンスを渡せるようにします。
そして、メソッド内には引数で渡されたインスタンスの `visit()` 、 `accept()` メソッドを呼び出します。
上記で説明したコードを書くと以下のようになります。

``` python
class Visitor():

    def visit(self, element: Element) -> None:
        element.accept(self)

class Element():

    def accept(self, visior: Visitor) -> None:
        visitor.visit(self)
```

